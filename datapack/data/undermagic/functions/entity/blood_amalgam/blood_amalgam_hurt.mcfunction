scoreboard players remove @s um.boss_hp 2
scoreboard players set @s um.dummy 0
particle minecraft:dust 1 0 0 1 ~ ~0.8 ~ 1 1 1 1 200
execute if entity @s[scores={um.boss_hp=..0}] run playsound minecraft:entity.elder_guardian.death hostile @a ~ ~ ~ 1 2
execute if entity @s[scores={um.boss_hp=..0}] run playsound minecraft:entity.witch.death hostile @a ~ ~ ~ 1 0
execute if entity @s[scores={um.boss_hp=..0}] run advancement grant @a only undermagic:undermagic/blood_amalgam
execute if entity @s[scores={um.boss_hp=..0}] run advancement grant @a only undermagic:undermagic/abyss blood_amalgam
execute if entity @s[scores={um.boss_hp=..0}] if score difficulty um.dummy matches 0 run loot spawn ~ ~ ~ loot undermagic:entities/blood_amalgam
execute if entity @s[scores={um.boss_hp=..0}] if score difficulty um.dummy matches 1.. run loot spawn ~ ~ ~ loot undermagic:entities/blood_amalgam_lunatic
execute unless entity @s[scores={um.boss_hp=..0}] run playsound minecraft:entity.wither.hurt hostile @a ~ ~ ~ 1 0.5
execute if entity @s[scores={um.boss_hp=..0}] run stopsound @a * undermagic:music.blood_amalgam
execute if entity @s[scores={um.boss_hp=..0}] run kill @s
execute unless entity @s[scores={um.boss_hp=..0}] run summon minecraft:husk ~2 ~1 ~ {Silent:1b,DeathLootTable:"minecraft:empty",PersistenceRequired:1b,CanPickUpLoot:0b,Health:40f,Tags:["um.entity","um.blood_minion","um.blood_amalgam"],CustomName:'{"text":"Blood Nodule"}',ArmorItems:[{},{},{},{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{CustomModelData:420046}}],ArmorDropChances:[0.85F,0.85F,0.85F,-327.67F],ActiveEffects:[{Id:14b,Amplifier:1b,Duration:20,ShowParticles:1b}],Attributes:[{Name:generic.max_health,Base:40},{Name:generic.follow_range,Base:64},{Name:generic.knockback_resistance,Base:1},{Name:generic.movement_speed,Base:0.2},{Name:generic.attack_damage,Base:7},{Name:zombie.spawn_reinforcements,Base:0}]}
execute unless entity @s[scores={um.boss_hp=..0}] run summon minecraft:husk ~-2 ~1 ~ {Silent:1b,DeathLootTable:"minecraft:empty",PersistenceRequired:1b,CanPickUpLoot:0b,Health:40f,Tags:["um.entity","um.blood_minion","um.blood_amalgam"],CustomName:'{"text":"Blood Nodule"}',ArmorItems:[{},{},{},{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{CustomModelData:420046}}],ArmorDropChances:[0.85F,0.85F,0.85F,-327.67F],ActiveEffects:[{Id:14b,Amplifier:1b,Duration:20,ShowParticles:1b}],Attributes:[{Name:generic.max_health,Base:40},{Name:generic.follow_range,Base:64},{Name:generic.knockback_resistance,Base:1},{Name:generic.movement_speed,Base:0.2},{Name:generic.attack_damage,Base:7},{Name:zombie.spawn_reinforcements,Base:0}]}
execute unless entity @s[scores={um.boss_hp=..0}] run summon minecraft:husk ~ ~1 ~2 {Silent:1b,DeathLootTable:"minecraft:empty",PersistenceRequired:1b,CanPickUpLoot:0b,Health:40f,Tags:["um.entity","um.blood_minion","um.blood_amalgam"],CustomName:'{"text":"Blood Nodule"}',ArmorItems:[{},{},{},{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{CustomModelData:420046}}],ArmorDropChances:[0.85F,0.85F,0.85F,-327.67F],ActiveEffects:[{Id:14b,Amplifier:1b,Duration:20,ShowParticles:1b}],Attributes:[{Name:generic.max_health,Base:40},{Name:generic.follow_range,Base:64},{Name:generic.knockback_resistance,Base:1},{Name:generic.movement_speed,Base:0.2},{Name:generic.attack_damage,Base:7},{Name:zombie.spawn_reinforcements,Base:0}]}
execute unless entity @s[scores={um.boss_hp=..0}] run summon minecraft:husk ~ ~1 ~-2 {Silent:1b,DeathLootTable:"minecraft:empty",PersistenceRequired:1b,CanPickUpLoot:0b,Health:40f,Tags:["um.entity","um.blood_minion","um.blood_amalgam"],CustomName:'{"text":"Blood Nodule"}',ArmorItems:[{},{},{},{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{CustomModelData:420046}}],ArmorDropChances:[0.85F,0.85F,0.85F,-327.67F],ActiveEffects:[{Id:14b,Amplifier:1b,Duration:20,ShowParticles:1b}],Attributes:[{Name:generic.max_health,Base:40},{Name:generic.follow_range,Base:64},{Name:generic.knockback_resistance,Base:1},{Name:generic.movement_speed,Base:0.2},{Name:generic.attack_damage,Base:7},{Name:zombie.spawn_reinforcements,Base:0}]}
execute unless entity @s[scores={um.boss_hp=..0}] if score difficulty um.dummy matches 1.. run summon minecraft:husk ~ ~1 ~ {Silent:1b,DeathLootTable:"minecraft:empty",PersistenceRequired:1b,CanPickUpLoot:0b,Health:40f,Tags:["um.entity","um.blood_minion","um.blood_amalgam"],CustomName:'{"text":"Blood Nodule"}',ArmorItems:[{},{},{},{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{CustomModelData:420046}}],ArmorDropChances:[0.85F,0.85F,0.85F,-327.67F],ActiveEffects:[{Id:14b,Amplifier:1b,Duration:20,ShowParticles:1b}],Attributes:[{Name:generic.max_health,Base:40},{Name:generic.follow_range,Base:64},{Name:generic.knockback_resistance,Base:1},{Name:generic.movement_speed,Base:0.2},{Name:generic.attack_damage,Base:7},{Name:zombie.spawn_reinforcements,Base:0}]}
execute if entity @s[scores={um.boss_hp=2}] run summon minecraft:husk ~2 ~1 ~-2 {Silent:1b,DeathLootTable:"minecraft:empty",PersistenceRequired:1b,CanPickUpLoot:0b,Health:40f,Tags:["um.entity","um.blood_minion","um.blood_amalgam"],CustomName:'{"text":"Blood Nodule"}',ArmorItems:[{},{},{},{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{CustomModelData:420046}}],ArmorDropChances:[0.85F,0.85F,0.85F,-327.67F],ActiveEffects:[{Id:14b,Amplifier:1b,Duration:20,ShowParticles:1b}],Attributes:[{Name:generic.max_health,Base:40},{Name:generic.follow_range,Base:64},{Name:generic.knockback_resistance,Base:1},{Name:generic.movement_speed,Base:0.2},{Name:generic.attack_damage,Base:7},{Name:zombie.spawn_reinforcements,Base:0}]}
execute if entity @s[scores={um.boss_hp=2}] run summon minecraft:husk ~-2 ~1 ~2 {Silent:1b,DeathLootTable:"minecraft:empty",PersistenceRequired:1b,CanPickUpLoot:0b,Health:40f,Tags:["um.entity","um.blood_minion","um.blood_amalgam"],CustomName:'{"text":"Blood Nodule"}',ArmorItems:[{},{},{},{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{CustomModelData:420046}}],ArmorDropChances:[0.85F,0.85F,0.85F,-327.67F],ActiveEffects:[{Id:14b,Amplifier:1b,Duration:20,ShowParticles:1b}],Attributes:[{Name:generic.max_health,Base:40},{Name:generic.follow_range,Base:64},{Name:generic.knockback_resistance,Base:1},{Name:generic.movement_speed,Base:0.2},{Name:generic.attack_damage,Base:7},{Name:zombie.spawn_reinforcements,Base:0}]}
execute if entity @s[scores={um.boss_hp=2}] run summon minecraft:husk ~2 ~1 ~2 {Silent:1b,DeathLootTable:"minecraft:empty",PersistenceRequired:1b,CanPickUpLoot:0b,Health:40f,Tags:["um.entity","um.blood_minion","um.blood_amalgam"],CustomName:'{"text":"Blood Nodule"}',ArmorItems:[{},{},{},{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{CustomModelData:420046}}],ArmorDropChances:[0.85F,0.85F,0.85F,-327.67F],ActiveEffects:[{Id:14b,Amplifier:1b,Duration:20,ShowParticles:1b}],Attributes:[{Name:generic.max_health,Base:40},{Name:generic.follow_range,Base:64},{Name:generic.knockback_resistance,Base:1},{Name:generic.movement_speed,Base:0.2},{Name:generic.attack_damage,Base:7},{Name:zombie.spawn_reinforcements,Base:0}]}
execute if entity @s[scores={um.boss_hp=2}] run summon minecraft:husk ~-2 ~1 ~-2 {Silent:1b,DeathLootTable:"minecraft:empty",PersistenceRequired:1b,CanPickUpLoot:0b,Health:40f,Tags:["um.entity","um.blood_minion","um.blood_amalgam"],CustomName:'{"text":"Blood Nodule"}',ArmorItems:[{},{},{},{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{CustomModelData:420046}}],ArmorDropChances:[0.85F,0.85F,0.85F,-327.67F],ActiveEffects:[{Id:14b,Amplifier:1b,Duration:20,ShowParticles:1b}],Attributes:[{Name:generic.max_health,Base:40},{Name:generic.follow_range,Base:64},{Name:generic.knockback_resistance,Base:1},{Name:generic.movement_speed,Base:0.2},{Name:generic.attack_damage,Base:7},{Name:zombie.spawn_reinforcements,Base:0}]}
scoreboard players set @s um.dummy_three 0